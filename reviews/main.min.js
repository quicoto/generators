(()=>{(()=>{let o={};function l(t){let{type:e,showFormatted:i,season:r,episode:a,volume:c,date:n,rating:s,comment:u,share:m}=t;function p(){let d="";return+r&&(d+=`season: ${+r}`),+a&&(d+=`
episode: ${+a}`),+c&&(d+=`volume: ${+c}`),d}return`
---
type: ${e==="manga"?"manga":"series"}
title: "${i} ${r}x${a}"
date: "${n}"
name: "${i}"
${p()}
rating: ${+s}
ratingEmoji: ${"\u2B50\uFE0F".repeat(+s)}
share: ${m==="true"?"true":"false"}
---

${u||`*[No review was written for this ${e==="manga"?"volume":"episode"}]*`}
`.trim()}function h(){o.form=document.querySelector("form"),o.show=document.querySelector("[name='show']"),o.seasonWrapper=document.querySelector("#season-wrapper"),o.episodeWrapper=document.querySelector("#episode-wrapper"),o.volumeWrapper=document.querySelector("#volume-wrapper")}function g(){let t=new Date;function e(s){return s<10&&(s=`0${s}`),s}let i=e(t.getDate()),r=e(t.getMonth()+1),a=e(t.getHours()),c=e(t.getMinutes()),n=e(t.getSeconds());return`${t.getFullYear()}-${r}-${i}T${a}:${c}:${n}`}function f(t){t.preventDefault();let e=new FormData(t.target),i=e.get("show"),r=document.querySelector("[name='show']").selectedOptions[0],a="https://github.com/quicoto/reviews/new/master/content/blog/",c=r.dataset.type==="manga"?"%VOLUME%":"%SEASON%x%EPISODE%",n=`${a}${r.dataset.type}/?filename=${r.dataset.type}/%SHOW%/${c}/index.md`,s=r.innerText,u=e.get("season"),m=e.get("episode"),p=e.get("volume"),d=e.get("rating"),S=e.get("comment"),y=e.get("share"),E=l({showFormatted:s,type:r.dataset.type,season:u,episode:m,volume:p,date:g(),rating:d,comment:S,share:y});n=n.replace("%SHOW%",i),n=n.replace("%SEASON%",u),n=n.replace("%EPISODE%",m),n=n.replace("%VOLUME%",p),navigator.clipboard.writeText(E),window.location.href=n}function w(){let t=document.querySelector("[name='show']").selectedOptions[0];t.dataset.type==="manga"?(o.seasonWrapper.setAttribute("hidden",!0),o.episodeWrapper.setAttribute("hidden",!0),o.volumeWrapper.removeAttribute("hidden")):t.dataset.type==="tv-shows"&&(o.seasonWrapper.removeAttribute("hidden"),o.episodeWrapper.removeAttribute("hidden"),o.volumeWrapper.setAttribute("hidden",!0))}function $(){o.form.addEventListener("submit",f),o.show.addEventListener("change",w)}function v(){h(),$()}v()})();})();
